<!DOCTYPE html>
<html>
<head>
<title>Simple JSON Formatter</title>
<style>
  body {
    background:#f4f4f4;
    color:#111;
    font-family: Arial;
    text-align:center;
    padding:20px;
  }

  h1{ margin-bottom:10px; }

  textarea {
    width:90%;
    height:450px;
    padding:10px;
    background:#ffffff;
    color:#222;
    border:1px solid #999;
    font-size:16px;
    border-radius:6px;
    outline:none;
  }

  textarea:focus{ border-color:#007bff; }

  .buttons{
    margin-top:15px;
  }

  button{
    padding:10px 15px;
    margin:4px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-size:15px;
  }

  .validate{ background:#007bff; color:white;}
  .pretty{ background:#28a745; color:white;}
  .minify{ background:#ff9800; color:white;}
  .clear{ background:#e63946; color:white;}

  #result{
    margin-top:12px;
    font-weight:bold;
  }

  .success{ color:#28a745;}
  .error{ color:#d90429;}

  .about {
    margin-top:25px;
    font-size:12px;
    color:#555;
    max-width:800px;
    margin-left:auto;
    margin-right:auto;
  }

  /* Tree View */
  #treeContainer {
    text-align:left;
    max-width:90%;
    margin:20px auto;
    background:white;
    border:1px solid #ccc;
    border-radius:6px;
    padding:10px;
    min-height:60px;
  }

  .tree-item{
    font-family: monospace;
    cursor:pointer;
    margin-left:12px;
  }

  .key{ color:#007bff; }
  .string{ color:#28a745; }
  .number{ color:#ff9800; }
  .boolean{ color:#d90429; }
  .null{ color:#999; }
</style>
</head>

<body>

<h1>JSON Format Tool</h1>

<textarea id="jsonInput" placeholder="Paste your JSON here..."></textarea>

<div class="buttons">
  <button class="validate" onclick="validateJSON()">Validate</button>
  <button class="pretty" onclick="prettifyJSON()">Prettify</button>
  <button class="minify" onclick="minifyJSON()">Compress</button>
  <button class="clear" onclick="clearJSON()">Clear</button>
</div>

<p id="result"></p>

<h3>JSON Tree View</h3>
<div id="treeContainer">Tree will appear here after validation...</div>

<p class="about">
  This is a simple offline JSON tool built using plain HTML, CSS and JavaScript. 
  Your JSON data is processed only inside your browser and is never uploaded or stored anywhere.
</p>

<script>
function validateJSON(){
  const text = document.getElementById("jsonInput").value;
  const result = document.getElementById("result");

  try {
    const parsed = JSON.parse(text);
    result.innerHTML = "Valid JSON ✔️";
    result.className = "success";
    renderTree(parsed);
  } catch(e){
    result.innerHTML = "Invalid JSON ❌<br>" + e.message;
    result.className = "error";
  }
}

function prettifyJSON(){
  try{
    const obj = JSON.parse(document.getElementById("jsonInput").value);
    document.getElementById("jsonInput").value = JSON.stringify(obj, null, 4);
    showSuccess("Prettified Successfully");
    renderTree(obj);
  }catch(e){
    showError(e.message);
  }
}

function minifyJSON(){
  try{
    const obj = JSON.parse(document.getElementById("jsonInput").value);
    document.getElementById("jsonInput").value = JSON.stringify(obj);
    showSuccess("Compressed Successfully");
    renderTree(obj);
  }catch(e){
    showError(e.message);
  }
}

function clearJSON(){
  document.getElementById("jsonInput").value = "";
  document.getElementById("result").innerHTML = "";
  document.getElementById("treeContainer").innerHTML = "Tree will appear here after validation...";
}

function showSuccess(msg){
  const result = document.getElementById("result");
  result.className = "success";
  result.innerHTML = msg;
}

function showError(msg){
  const result = document.getElementById("result");
  result.className = "error";
  result.innerHTML = "Error ❌<br>" + msg;
}

/* -------- TREE VIEW -------- */
function renderTree(obj){
  const container = document.getElementById("treeContainer");
  container.innerHTML = "";
  container.appendChild(buildTree(obj));
}

function buildTree(data){
  const ul = document.createElement("ul");

  Object.entries(data).forEach(([key, value]) => {
    const li = document.createElement("li");
    li.className = "tree-item";

    if(typeof value === "object" && value !== null){
      li.innerHTML = `<span class='key'>${key}</span>: {}`;
      li.onclick = function(e){
        e.stopPropagation();
        this.children[1].style.display =
          this.children[1].style.display === "none" ? "block" : "none";
      };
      li.appendChild(buildTree(value));
    } else {
      li.innerHTML = `<span class='key'>${key}</span>: ${formatValue(value)}`;
    }

    ul.appendChild(li);
  });

  return ul;
}

function formatValue(v){
  if(typeof v === "string") return `<span class='string'>"${v}"</span>`;
  if(typeof v === "number") return `<span class='number'>${v}</span>`;
  if(typeof v === "boolean") return `<span class='boolean'>${v}</span>`;
  if(v === null) return `<span class='null'>null</span>`;
  return v;
}
</script>

</body>
</html>
